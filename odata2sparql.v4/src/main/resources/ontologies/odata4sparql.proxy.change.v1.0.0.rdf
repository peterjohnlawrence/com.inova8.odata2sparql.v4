<?xml version="1.0"?>
<rdf:RDF
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:odata4sparql="http://inova8.com/odata4sparql#"
    xmlns:sp="http://spinrdf.org/sp#"
    xmlns:change="http://inova8.com/odata4sparql/change/"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:spin="http://spinrdf.org/spin#"
    xmlns:spl="http://spinrdf.org/spl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
  xml:base="http://inova8.com/odata4sparql/change/">
  <owl:Ontology rdf:about="">
    <owl:imports rdf:resource="http://inova8.com/odata4sparql"/>
  </owl:Ontology>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedObject">
    <rdfs:label>addedObject</rdfs:label>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
    <rdfs:domain>
      <odata4sparql:Operation rdf:about="http://inova8.com/odata4sparql/change/History">
        <odata4sparql:isProxy rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
        >true</odata4sparql:isProxy>
        <spin:constraint>
          <spl:Argument>
            <odata4sparql:isDataset rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
            >true</odata4sparql:isDataset>
            <spl:valueType rdf:resource="http://inova8.com/odata4sparql#Dataset"/>
            <spl:predicate>
              <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/service"/>
            </spl:predicate>
          </spl:Argument>
        </spin:constraint>
        <spin:body>
          <sp:Select>
            <sp:distinct rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
            >true</sp:distinct>
            <sp:text>select distinct ?change ?created ?added ?addedSubject ?addedPredicate  ?addedObject ?addedGraph ?deleted ?deletedSubject ?deletedPredicate ?deletedObject ?deletedGraph ?reversible
where{ 
	service   ?service #&lt;http://localhost:8080/rdf4j-server/repositories/northwind&gt; 
	{
		graph &lt;http://inova8.com/odata4sparql/change&gt;{
			?overallChange a &lt;http://inova8.com/odata4sparql#Change&gt; ;
				&lt;http://inova8.com/odata4sparql#created&gt; ?created .
			OPTIONAL{ 
				?overallChange  &lt;http://inova8.com/odata4sparql#added&gt; ?added .   
				?added &lt;http://inova8.com/odata4sparql#subject&gt; ?addedSubject ;
					&lt;http://inova8.com/odata4sparql#predicate&gt; ?addedPredicate;
					&lt;http://inova8.com/odata4sparql#object&gt; ?addedObject  ;
					&lt;http://inova8.com/odata4sparql#graph&gt; ?addedGraph .
			}
			OPTIONAL{ 
				?overallChange  &lt;http://inova8.com/odata4sparql#deleted&gt; ?deleted .   
				?deleted &lt;http://inova8.com/odata4sparql#subject&gt; ?deletedSubject ;
					&lt;http://inova8.com/odata4sparql#predicate&gt; ?deletedPredicate ;
					&lt;http://inova8.com/odata4sparql#object&gt; ?deletedObject ;
					&lt;http://inova8.com/odata4sparql#graph&gt; ?deletedGraph .
			}
			OPTIONAL{{
				?laterChange a &lt;http://inova8.com/odata4sparql#Change&gt; ;
				  &lt;http://inova8.com/odata4sparql#created&gt; ?laterCreated .	
				?laterChange  &lt;http://inova8.com/odata4sparql#deleted&gt; ?laterDeleted .   
				?laterDeleted &lt;http://inova8.com/odata4sparql#subject&gt; ?addedSubject ;
					&lt;http://inova8.com/odata4sparql#predicate&gt; ?addedPredicate;
					&lt;http://inova8.com/odata4sparql#object&gt; ?addedObject  ;
					&lt;http://inova8.com/odata4sparql#graph&gt; ?laterDeletedGraph .
				}
				FILTER(?created  &lt; ?laterCreated )
			}
      BIND( COALESCE( (?created  &gt; ?laterCreated ), true) as ?reversible)
BIND (COALESCE( ?added ,?deleted)as ?change)
		}
	} 
}</sp:text> <sp:resultVariables rdf:parseType="Collection">
              <rdf:Description>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/change"/>
                </spl:predicate>
                <sp:varName>change</sp:varName>
              </rdf:Description>
              <rdf:Description>
                <sp:varName>created</sp:varName>
                <spl:predicate>
                  <owl:DatatypeProperty rdf:about="http://inova8.com/odata4sparql/change/created"/>
                </spl:predicate>
              </rdf:Description>
              <rdf:Description>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/added"/>
                </spl:predicate>
                <sp:varName>added</sp:varName>
              </rdf:Description>
              <rdf:Description>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <sp:varName>addedSubject</sp:varName>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedSubject"/>
                </spl:predicate>
              </rdf:Description>
              <rdf:Description>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedPredicate"/>
                </spl:predicate>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <sp:varName>addedPredicate</sp:varName>
              </rdf:Description>
              <rdf:Description>
                <sp:varName>addedObject</sp:varName>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <spl:predicate rdf:resource="http://inova8.com/odata4sparql/change/addedObject"/>
              </rdf:Description>
              <rdf:Description>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedGraph"/>
                </spl:predicate>
                <sp:varName>addedGraph</sp:varName>
              </rdf:Description>
              <rdf:Description>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <sp:varName>deleted</sp:varName>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deleted"/>
                </spl:predicate>
              </rdf:Description>
              <rdf:Description>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedSubject"/>
                </spl:predicate>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <sp:varName>deletedSubject</sp:varName>
              </rdf:Description>
              <rdf:Description>
                <sp:varName>deletedPredicate</sp:varName>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedPredicate"/>
                </spl:predicate>
              </rdf:Description>
              <rdf:Description>
                <sp:varName>deletedObject</sp:varName>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedObject"/>
                </spl:predicate>
              </rdf:Description>
              <rdf:Description>
                <spl:predicate>
                  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedGraph"/>
                </spl:predicate>
                <sp:varName>deletedGraph</sp:varName>
                <odata4sparql:isOptional rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                >true</odata4sparql:isOptional>
              </rdf:Description>
              <rdf:Description>
                <spl:predicate>
                  <owl:DatatypeProperty rdf:about="http://inova8.com/odata4sparql/change/reversible"/>
                </spl:predicate>
                <sp:varName>reversible</sp:varName>
              </rdf:Description>
            </sp:resultVariables>
            <sp:where rdf:parseType="Collection">
              <sp:Service>
                <sp:serviceURI rdf:parseType="Resource">
                  <sp:varName>service</sp:varName>
                </sp:serviceURI>
                <sp:elements rdf:parseType="Collection">
                  <sp:NamedGraph>
                    <sp:elements rdf:parseType="Collection">
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>change</sp:varName>
                        </sp:subject>
                        <sp:object rdf:resource="http://inova8.com/odata4sparql#Change"/>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>created</sp:varName>
                        </sp:object>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#created"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>change</sp:varName>
                        </sp:subject>
                      </rdf:Description>
                      <sp:Optional>
                        <sp:elements rdf:parseType="Collection">
                          <rdf:Description>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>change</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#added"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>added</sp:varName>
                            </sp:object>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>addedSubject</sp:varName>
                            </sp:object>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>added</sp:varName>
                            </sp:subject>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>added</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>addedPredicate</sp:varName>
                            </sp:object>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>addedObject</sp:varName>
                            </sp:object>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>added</sp:varName>
                            </sp:subject>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>addedGraph</sp:varName>
                            </sp:object>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>added</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                          </rdf:Description>
                        </sp:elements>
                      </sp:Optional>
                      <sp:Optional>
                        <sp:elements rdf:parseType="Collection">
                          <rdf:Description>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>change</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#deleted"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>deleted</sp:varName>
                            </sp:object>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>deleted</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>deletedSubject</sp:varName>
                            </sp:object>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>deleted</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>deletedPredicate</sp:varName>
                            </sp:object>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>deletedObject</sp:varName>
                            </sp:object>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>deleted</sp:varName>
                            </sp:subject>
                          </rdf:Description>
                          <rdf:Description>
                            <sp:subject rdf:parseType="Resource">
                              <sp:varName>deleted</sp:varName>
                            </sp:subject>
                            <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                            <sp:object rdf:parseType="Resource">
                              <sp:varName>deletedGraph</sp:varName>
                            </sp:object>
                          </rdf:Description>
                        </sp:elements>
                      </sp:Optional>
                      <sp:Optional>
                        <sp:elements rdf:parseType="Collection">
                          <rdf:Description>
                            <rdf:rest rdf:parseType="Collection">
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName>laterChange</sp:varName>
                                </sp:subject>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName>laterCreated</sp:varName>
                                </sp:object>
                                <sp:predicate rdf:resource="http://inova8.com/odata4sparql#created"/>
                              </rdf:Description>
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName>laterChange</sp:varName>
                                </sp:subject>
                                <sp:predicate rdf:resource="http://inova8.com/odata4sparql#deleted"/>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName>laterDeleted</sp:varName>
                                </sp:object>
                              </rdf:Description>
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName>laterDeleted</sp:varName>
                                </sp:subject>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName>addedSubject</sp:varName>
                                </sp:object>
                                <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                              </rdf:Description>
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName>laterDeleted</sp:varName>
                                </sp:subject>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName>addedPredicate</sp:varName>
                                </sp:object>
                                <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                              </rdf:Description>
                              <rdf:Description>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName>addedObject</sp:varName>
                                </sp:object>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName>laterDeleted</sp:varName>
                                </sp:subject>
                                <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                              </rdf:Description>
                              <rdf:Description>
                                <sp:subject rdf:parseType="Resource">
                                  <sp:varName>laterDeleted</sp:varName>
                                </sp:subject>
                                <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                                <sp:object rdf:parseType="Resource">
                                  <sp:varName>laterDeletedGraph</sp:varName>
                                </sp:object>
                              </rdf:Description>
                            </rdf:rest>
                            <rdf:first rdf:parseType="Resource">
                              <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                              <sp:object rdf:resource="http://inova8.com/odata4sparql#Change"/>
                              <sp:subject rdf:parseType="Resource">
                                <sp:varName>laterChange</sp:varName>
                              </sp:subject>
                            </rdf:first>
                          </rdf:Description>
                          <sp:Filter>
                            <sp:expression>
                              <sp:lt>
                                <sp:arg2 rdf:parseType="Resource">
                                  <sp:varName>laterCreated</sp:varName>
                                </sp:arg2>
                                <sp:arg1 rdf:parseType="Resource">
                                  <sp:varName>created</sp:varName>
                                </sp:arg1>
                              </sp:lt>
                            </sp:expression>
                          </sp:Filter>
                        </sp:elements>
                      </sp:Optional>
                      <sp:Bind>
                        <sp:expression>
                          <sp:coalesce>
                            <sp:arg1>
                              <sp:gt>
                                <sp:arg1 rdf:parseType="Resource">
                                  <sp:varName>created</sp:varName>
                                </sp:arg1>
                                <sp:arg2 rdf:parseType="Resource">
                                  <sp:varName>laterCreated</sp:varName>
                                </sp:arg2>
                              </sp:gt>
                            </sp:arg1>
                            <sp:arg2 rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
                            >true</sp:arg2>
                          </sp:coalesce>
                        </sp:expression>
                        <sp:variable rdf:parseType="Resource">
                          <sp:varName>reversible</sp:varName>
                        </sp:variable>
                      </sp:Bind>
                    </sp:elements>
                    <sp:graphNameNode rdf:resource="http://inova8.com/odata4sparql/change"/>
                  </sp:NamedGraph>
                </sp:elements>
              </sp:Service>
            </sp:where>
          </sp:Select>
        </spin:body>
        <spin:constraint>
          <spl:Argument>
            <spl:predicate>
              <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/rollbackchange"/>
            </spl:predicate>
            <spl:valueType rdf:resource="http://inova8.com/odata4sparql#Change"/>
          </spl:Argument>
        </spin:constraint>
        <spin:abstract rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean"
        >false</spin:abstract>
        <rdfs:label>History</rdfs:label>
        <odata4sparql:deleteBody>
          <sp:Modify>
            <sp:insertPattern rdf:parseType="Collection">
              <sp:NamedGraph>
                <sp:graphNameNode rdf:parseType="Resource">
                  <sp:varName>addedGraph</sp:varName>
                </sp:graphNameNode>
                <sp:elements rdf:parseType="Collection">
                  <rdf:Description>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>deletedObject</sp:varName>
                    </sp:object>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>deletedSubject</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:parseType="Resource">
                      <sp:varName>deletedPredicate</sp:varName>
                    </sp:predicate>
                  </rdf:Description>
                </sp:elements>
              </sp:NamedGraph>
            </sp:insertPattern>
            <sp:text>DELETE{
	GRAPH ?addedGraph
	{
		?addedSubject ?addedPredicate ?addedObject
	}
	GRAPH &lt;http://change&gt;
	{
		?change a &lt;http://inova8.com/odata4sparql#Change&gt; ;
			&lt;http://inova8.com/odata4sparql#created&gt; ?created .
		?change  &lt;http://inova8.com/odata4sparql#added&gt; ?added .   
		?added &lt;http://inova8.com/odata4sparql#subject&gt; ?addedSubject ;
			&lt;http://inova8.com/odata4sparql#predicate&gt; ?addedPredicate;
			&lt;http://inova8.com/odata4sparql#object&gt; ?addedObject  ;
			&lt;http://inova8.com/odata4sparql#graph&gt; ?addedGraph .
		?change  &lt;http://inova8.com/odata4sparql#deleted&gt; ?deleted .   
		?deleted &lt;http://inova8.com/odata4sparql#subject&gt; ?deletedSubject ;
			&lt;http://inova8.com/odata4sparql#predicate&gt; ?deletedPredicate;
			&lt;http://inova8.com/odata4sparql#object&gt; ?deletedObject ;
			&lt;http://inova8.com/odata4sparql#graph&gt; ?deletedGraph .
	}
}
INSERT{
	GRAPH ?addedGraph
	{
		?deletedSubject ?deletedPredicate ?deletedObject
	}
}
where{
	#BIND(&lt;http://change/b7f577d7a8aacb9241bc0696bd2da2adc9eade29-2020-02-27T16:10:47.102Z&gt; as ?change)
	BIND(?rollbackchange as ?change)
	graph &lt;http://change&gt;{
		?change a &lt;http://inova8.com/odata4sparql#Change&gt; ;
			&lt;http://inova8.com/odata4sparql#created&gt; ?created .
		OPTIONAL{ 
			?change  &lt;http://inova8.com/odata4sparql#added&gt; ?added .   
			?added &lt;http://inova8.com/odata4sparql#subject&gt; ?addedSubject ;
				&lt;http://inova8.com/odata4sparql#predicate&gt; ?addedPredicate;
				&lt;http://inova8.com/odata4sparql#object&gt; ?addedObject  ;
				&lt;http://inova8.com/odata4sparql#graph&gt; ?addedGraph .
		}
		OPTIONAL{ 
			?change  &lt;http://inova8.com/odata4sparql#deleted&gt; ?deleted .   
			?deleted &lt;http://inova8.com/odata4sparql#subject&gt; ?deletedSubject ;
				&lt;http://inova8.com/odata4sparql#predicate&gt; ?deletedPredicate;
				&lt;http://inova8.com/odata4sparql#object&gt; ?deletedObject ;
				&lt;http://inova8.com/odata4sparql#graph&gt; ?deletedGraph .
		}
	}
}</sp:text> <sp:deletePattern rdf:parseType="Collection">
              <sp:NamedGraph>
                <sp:elements rdf:parseType="Collection">
                  <rdf:Description>
                    <sp:predicate rdf:parseType="Resource">
                      <sp:varName>addedPredicate</sp:varName>
                    </sp:predicate>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>addedObject</sp:varName>
                    </sp:object>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>addedSubject</sp:varName>
                    </sp:subject>
                  </rdf:Description>
                </sp:elements>
                <sp:graphNameNode rdf:parseType="Resource">
                  <sp:varName>addedGraph</sp:varName>
                </sp:graphNameNode>
              </sp:NamedGraph>
              <sp:NamedGraph>
                <sp:elements rdf:parseType="Collection">
                  <rdf:Description>
                    <sp:object rdf:resource="http://inova8.com/odata4sparql#Change"/>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>change</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>created</sp:varName>
                    </sp:object>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>change</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#created"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>added</sp:varName>
                    </sp:object>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>change</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#added"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>added</sp:varName>
                    </sp:subject>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>addedSubject</sp:varName>
                    </sp:object>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>addedPredicate</sp:varName>
                    </sp:object>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>added</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>added</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>addedObject</sp:varName>
                    </sp:object>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>added</sp:varName>
                    </sp:subject>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>addedGraph</sp:varName>
                    </sp:object>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>change</sp:varName>
                    </sp:subject>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>deleted</sp:varName>
                    </sp:object>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#deleted"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>deleted</sp:varName>
                    </sp:subject>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>deletedSubject</sp:varName>
                    </sp:object>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>deleted</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>deletedPredicate</sp:varName>
                    </sp:object>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>deletedObject</sp:varName>
                    </sp:object>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>deleted</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>deleted</sp:varName>
                    </sp:subject>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>deletedGraph</sp:varName>
                    </sp:object>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                  </rdf:Description>
                </sp:elements>
                <sp:graphNameNode rdf:resource="http://change"/>
              </sp:NamedGraph>
            </sp:deletePattern>
            <sp:where rdf:parseType="Collection">
              <sp:Bind>
                <sp:variable rdf:parseType="Resource">
                  <sp:varName>change</sp:varName>
                </sp:variable>
                <sp:expression rdf:parseType="Resource">
                  <sp:varName>rollbackchange</sp:varName>
                </sp:expression>
              </sp:Bind>
              <sp:NamedGraph>
                <sp:elements rdf:parseType="Collection">
                  <rdf:Description>
                    <sp:object rdf:resource="http://inova8.com/odata4sparql#Change"/>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>change</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"/>
                  </rdf:Description>
                  <rdf:Description>
                    <sp:subject rdf:parseType="Resource">
                      <sp:varName>change</sp:varName>
                    </sp:subject>
                    <sp:predicate rdf:resource="http://inova8.com/odata4sparql#created"/>
                    <sp:object rdf:parseType="Resource">
                      <sp:varName>created</sp:varName>
                    </sp:object>
                  </rdf:Description>
                  <sp:Optional>
                    <sp:elements rdf:parseType="Collection">
                      <rdf:Description>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>change</sp:varName>
                        </sp:subject>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#added"/>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>added</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>addedSubject</sp:varName>
                        </sp:object>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>added</sp:varName>
                        </sp:subject>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>added</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>addedPredicate</sp:varName>
                        </sp:object>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>addedObject</sp:varName>
                        </sp:object>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>added</sp:varName>
                        </sp:subject>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>addedGraph</sp:varName>
                        </sp:object>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>added</sp:varName>
                        </sp:subject>
                      </rdf:Description>
                    </sp:elements>
                  </sp:Optional>
                  <sp:Optional>
                    <sp:elements rdf:parseType="Collection">
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#deleted"/>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>deleted</sp:varName>
                        </sp:object>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>change</sp:varName>
                        </sp:subject>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#subject"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>deleted</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>deletedSubject</sp:varName>
                        </sp:object>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>deletedPredicate</sp:varName>
                        </sp:object>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#predicate"/>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>deleted</sp:varName>
                        </sp:subject>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>deleted</sp:varName>
                        </sp:subject>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>deletedObject</sp:varName>
                        </sp:object>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#object"/>
                      </rdf:Description>
                      <rdf:Description>
                        <sp:subject rdf:parseType="Resource">
                          <sp:varName>deleted</sp:varName>
                        </sp:subject>
                        <sp:predicate rdf:resource="http://inova8.com/odata4sparql#graph"/>
                        <sp:object rdf:parseType="Resource">
                          <sp:varName>deletedGraph</sp:varName>
                        </sp:object>
                      </rdf:Description>
                    </sp:elements>
                  </sp:Optional>
                </sp:elements>
                <sp:graphNameNode rdf:resource="http://change"/>
              </sp:NamedGraph>
            </sp:where>
          </sp:Modify>
        </odata4sparql:deleteBody>
      </odata4sparql:Operation>
    </rdfs:domain>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedSubject">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:label>deletedSubject</rdfs:label>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedPredicate">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:range rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"/>
    <rdfs:label>addedPredicate</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/added">
    <rdfs:range rdf:resource="http://inova8.com/odata4sparql#Statement"/>
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:label>added</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedSubject">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
    <rdfs:label>addedSubject</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedGraph">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
    <rdfs:label>deletedGraph</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/service">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:comment>The service to be accessed to provide the change</rdfs:comment>
    <rdfs:range rdf:resource="http://inova8.com/odata4sparql#Dataset"/>
    <rdfs:label>service</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/rollbackchange">
    <rdfs:range rdf:resource="http://inova8.com/odata4sparql#Change"/>
    <rdfs:label>rollbackchange</rdfs:label>
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/change">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:label>change</rdfs:label>
    <rdfs:range rdf:resource="http://inova8.com/odata4sparql#Change"/>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedObject">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:label>deletedObject</rdfs:label>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deletedPredicate">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:range rdf:resource="http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"/>
    <rdfs:label>deletedPredicate</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/deleted">
    <rdfs:range rdf:resource="http://inova8.com/odata4sparql#Statement"/>
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:label>deleted</rdfs:label>
  </owl:ObjectProperty>
  <owl:ObjectProperty rdf:about="http://inova8.com/odata4sparql/change/addedGraph">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:label>addedGraph</rdfs:label>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
  </owl:ObjectProperty>
  <owl:DatatypeProperty rdf:about="http://inova8.com/odata4sparql/change/created">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#dateTime"/>
    <rdfs:label>created</rdfs:label>
  </owl:DatatypeProperty>
  <owl:DatatypeProperty rdf:about="http://inova8.com/odata4sparql/change/reversible">
    <rdfs:domain rdf:resource="http://inova8.com/odata4sparql/change/History"/>
    <rdfs:range rdf:resource="http://www.w3.org/2001/XMLSchema#boolean"/>
    <rdfs:label>reversible</rdfs:label>
  </owl:DatatypeProperty>
</rdf:RDF>

<!-- Created with TopBraid -->
